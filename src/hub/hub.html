<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hub | AVANCE</title>

    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- Seu CSS atual -->
    <link rel="stylesheet" href="../../style.css" />
    <!-- CSS do Hub -->
    <link rel="stylesheet" href="./hub.css" />
  </head>

  <body>
    <aside class="sidebar">
      <div class="logo-container">
        <!-- Ajuste o caminho conforme sua estrutura -->
        <img src="../../img/avanceVip.png" alt="Logo AVANCE" class="company-logo" />
      </div>

      <div class="sidebar-header" style="gap: 10px; display: flex; flex-direction: column;">
        <div style="width: 100%;">
          <div style="font-size: 12px; opacity: 0.8;">Logado como</div>
          <div id="user-email" style="font-weight: 600; word-break: break-word;"></div>
        </div>

        <button class="new-chat-btn" id="logout-btn" type="button">
          <i class="ph ph-sign-out"></i>
          <span>Sair</span>
        </button>
      </div>

      <div class="chat-list">
        <div class="chat-item active">
          <i class="ph ph-squares-four"></i>
          <div class="chat-info">
            <div class="chat-title">Hub de Aplicações</div>
            <div class="chat-date">Produtos disponíveis</div>
          </div>
        </div>
      </div>

      <div class="sidebar-footer">
        <button class="theme-toggle" id="theme-toggle" type="button">
          <i class="ph ph-moon"></i>
          <span>Modo escuro</span>
        </button>
      </div>
    </aside>

    <main class="main-content">
      <header class="chat-header">
        <button class="mobile-menu-btn" id="mobile-menu-btn" type="button">
          <i class="ph ph-list"></i>
        </button>

        <div class="assistant-info">
          <div class="assistant-avatar">
            <img src="../../img/icone.jpg" alt="Avatar" />
            </div>
          <div class="assistant-details">
            <span class="name">Hub AVANCE</span>
            <span class="status">Acesso controlado por login</span>
          </div>
        </div>
      </header>

      <section class="hub-container">
        <div class="hub-head">
          <h1 class="hub-title">Aplicações</h1>
          <p class="hub-subtitle">Selecione um produto para acessar.</p>
        </div>

        <div class="hub-grid">
          <!-- CARD 1: Aplicação Web -->
          <article class="hub-card">
            <div class="hub-card-top">
              <div class="hub-badge">Agente de suporte | EM PRODUÇÃO</div>
              <div class="hub-icon">
                <i class="ph ph-globe"></i>
              </div>
            </div>

            <h2 class="hub-card-title">Agente Web | EM PRODUÇÃO</h2>
            <p class="hub-card-desc">
              Acesse o sistema online. Ideal para uso em qualquer dispositivo.
            </p>

            <div class="hub-card-actions">
              <a
                  id="open-agent-link"
                  class="hub-btn hub-btn-primary"
                  href="../api/contador?app=agent"
                  data-track="open_agent_app"
                >
                <i class="ph ph-arrow-square-out"></i>
                <span>Acessar</span>
                <!-- <button class="hub-btn" type="button" disabled>
                <i class="ph ph-lock"></i>
                <span>Indisponível</span> -->
              </a>
            </div>
          </article>

          <!-- CARD 2: Desktop -->
          <article class="hub-card">
            <div class="hub-card-top">
              <div class="hub-badge">Preenche Fácil</div>
              <div class="hub-icon">
                <i class="ph ph-desktop"></i>
              </div>
            </div>

            <h2 class="hub-card-title">Aplicação Desktop</h2>
            <p class="hub-card-desc" style="text-align: justify;">
              O Preenche Fácil é uma ferramenta simples de usar, feita para facilitar sua rotina. Você preenche os dados pelo programa e ele organiza tudo automaticamente no Excel. E pode ficar tranquilo: o programa funciona na sua máquina, sem internet, então suas informações ficam com você. Ninguém tem acesso aos seus dados. Depois de baixar, ele é seu para sempre. 
              <!-- <div id="user-email-card"></div> -->
            </p>

            <div class="hub-card-actions">
              <a
                class="hub-btn"
                href="../api/contador?app=desktop"
                target="_blank"
                rel="noopener noreferrer"
                data-track="download_desktop"
              >
                <i class="ph ph-download-simple"></i>
                <span>Baixar</span>
              </a>
            </div>
          </article>

          <!-- CARD 3: Placeholder -->
          <article class="hub-card hub-card-disabled">
            <div class="hub-card-top">
              <div class="hub-badge">Em breve</div>
              <div class="hub-icon">
                <i class="ph ph-rocket-launch"></i>
              </div>
            </div>

            <h2 class="hub-card-title">Novo Produto</h2>
            <p class="hub-card-desc">
              Espaço reservado para próximos aplicativos do hub.
            </p>

            <div class="hub-card-actions">
              <button class="hub-btn" type="button" disabled>
                <i class="ph ph-lock"></i>
                <span>Indisponível</span>
              </button>
            </div>
          </article>
        </div>
      </section>

      <footer class="hub-footer">
        <span>AVANCE • Hub de Distribuição</span>
      </footer>
    </main>

    <!-- Toast (mensagem flutuante de boas-vindas) -->
    <div id="toast-backdrop" class="toast-backdrop" hidden>
      <div id="welcome-toast" class="toast" role="status" aria-live="polite" aria-atomic="true" hidden>
        <div class="toast-content">
          <div class="toast-icon">
            <img
              id="welcome-toast-image"
              src="../img/icone.jpg"
              alt="Boas-vindas"
            />
          </div>

          <div class="toast-text">
            <div class="toast-title" id="welcome-toast-title">Bem-vindo!</div>
            <div class="toast-message" id="welcome-toast-message">
              <!-- Mensagem editável (pode trocar depois) -->
              Estamos felizes em ter você aqui. ✅
            </div>
          </div>

          <button type="button" class="toast-close" id="welcome-toast-close" aria-label="Fechar mensagem">
            <i class="ph ph-x"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../../supabaseClient.js"></script>

    <!-- Hub JS -->
    <script src="./hub.js" defer></script>
  </body>
</html>